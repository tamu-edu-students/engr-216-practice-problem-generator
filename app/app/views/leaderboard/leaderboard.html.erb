<div class="container mt-4">
  <h1 class="text-center mb-4">Leaderboard</h1>

  <% if defined?(current_user) && current_user && current_user.role == "student" %>
    <% if current_user.total_submissions == 0 %>
      <div class="alert alert-info text-center">
        You are not currently on the leaderboard. Practice some problems to join the leaderboard.
      </div>
    <% elsif @rank %>
      <div class="alert alert-success text-center">
        Your current rank is <strong><%= @rank + 1 %></strong>.
      </div>
    <% else %>
      <div class="alert alert-warning text-center">
        Your rank is not yet determined.
      </div>
    <% end %>
  <% end %>

  <div class="table-responsive">
    <table class="table table-hover table-striped table-bordered text-center">
      <thead class="table-dark">
        <tr>
          <th scope="col">Rank</th>
          <th scope="col">Student</th>
          <th scope="col">Problems Completed</th>
          <th scope="col">Correct Answers</th>
        </tr>
      </thead>
      <tbody>
        <% @students.each_with_index do |student, index| %>
          <tr>
            <td><strong><%= index + 1 %></strong></td>
            <td><%= student.full_name %></td>
            <td><%= student.total_submissions %></td>
            <td><%= student.correct_submissions %></td>
          </tr>
        <% end %>
      </tbody>
    </table>
  </div>
</div>